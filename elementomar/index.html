<div class="content-description-product clearfix">
  <div class="row clearfix image-right">
    <div class="imagem-description">
      <figure>
        <img src="" alt="Imagem padr&atilde;o" />
      </figure>
    </div>
    <div class="content-description">
      <h3>Saia de Tule Off-White com Babados e Amarração Rolotê</h3>
      <p>
        Adicione um toque de leveza e romantismo ao seu guarda-roupa com a Saia
        de Tule Off-White. Feita em tule macio e leve, essa peça possui uma
        modelagem fluida, com delicados babados que conferem movimento e um
        charme especial ao seu visual. A cintura é ajustável com um cordão de
        amarração tipo rolotê duplo, que além de garantir o ajuste perfeito,
        adiciona um toque extra de estilo à peça. Versátil e elegante, essa saia
        é perfeita para criar looks que vão do casual ao mais sofisticado,
        combinando facilmente com T-shirts, tops ou regatas.
      </p>
    </div>
  </div>
  <!-- <div class="row clearfix image-left">
        <div class="imagem-description">
            <figure>
                <img src="https://magazord-public.s3.amazonaws.com/elementomar/img/2025/09/produto/26766/design-sem-nome-20.png"
                    alt="Imagem padr&atilde;o" />
            </figure>
        </div>
        <div class="content-description">
            <h3>Bojo removível</h3>
            <p>
                Impossível viver sem os nossos amados biquínis, e nós temos desde os
                mais comuns como o biquíni cortininha até os mais exóticos como o
                biquíni ciganinha. Além de biquínis para todos os gostos, a Elementomar
                também pensa no seu conforto, sempre inovando maneiras de usar um mesmo
                modelo, uma delas é a flexibilidade de remoção ou colocação do bojo, que
                vai de sua preferência usar ou não. São maleáveis, laváveis e não
                absorvem água, e o melhor, não quebram.
            </p>
        </div>
    </div> -->
  <div class="row clearfix image-left"></div>
  <style>
    #descricao-produto .content .content-description-product img {
      height: auto;
      border-radius: 50%;
    }

    #descricao-produto
      .content
      .content-description-product
      .image-left
      .content-description,
    #descricao-produto
      .content
      .content-description-product
      .image-right
      .content-description {
      width: 100%;
      margin: 50px;
    }

    @media (max-width: 768px) {
      #descricao-produto .content .content-description-product img {
        max-width: 300px;
        margin: auto;
      }

      #descricao-produto
        .content
        .content-description-product
        .image-left
        .content-description,
      #descricao-produto
        .content
        .content-description-product
        .image-right
        .content-description {
        width: 80%;
        margin: 50px auto;
      }
    }

    @media (max-width: 768px) {
      #descricao-produto
        .content
        .content-description-product
        .image-left
        .imagem-description,
      #descricao-produto
        .content
        .content-description-product
        .image-right
        .imagem-description {
        width: 100%;
        margin: auto;
      }
    }
  </style>
  <div>
    <h3>Monte seu conjunto</h3>
    <p>
      Na Elementomar você tem liberdade para escolher peças avulsas, tamanhos de
      tops e de calcinhas de forma independente, tudo para atender à diversidade
      das mulheres brasileiras. Adicione ao carrinho e após clique em "continuar
      comprando" para selecionar novas peças.
    </p>
    <h3 style="margin-bottom: 20px; margin-top: 25px">
      <span style="color: #000000">Tecidos para voc&ecirc;</span>
    </h3>
    <p style="margin-bottom: 25px">
      &Eacute; pensando em nossas clientes que utilizamos os tecidos de melhor
      qualidade da regi&atilde;o em todos os nossos produtos. Nossos tecidos
      possuem a tecnologia mais avan&ccedil;ada do mercado, s&atilde;o
      male&aacute;veis, biodegrad&aacute;veis, com prote&ccedil;&atilde;o UV
      igual ou superior 50+, n&atilde;o precisa passar e possuem secagem
      r&aacute;pida.
    </p>
    <h3><span style="color: #000000">Modo de lavagem:</span><br /><br /></h3>
    <p>
      - Seguir rigorosamente as instru&ccedil;&otilde;es de uso e
      conserva&ccedil;&atilde;o que constam na etiqueta da pe&ccedil;a;
    </p>
    <p>- Lavar separadamente cores claras e cores escuras;</p>
    <p>- N&atilde;o deixar de molho;</p>
    <p>- N&atilde;o usar sab&atilde;o em excesso;</p>
    <p>
      - N&atilde;o usar produto alvejante, como claro ou &aacute;gua
      sanit&aacute;ria;
    </p>
    <p>- N&atilde;o colocar sab&atilde;o diretamente sobre a malha/tecido;</p>
    <p>
      - Enxaguar bem, n&atilde;o deixando res&iacute;duo de sab&atilde;o e
      excesso de &aacute;gua;
    </p>
    <p>
      - Cores fortes fluorescente devem ser lavadas separadamente e com maior
      quantidade de &aacute;gua;
    </p>
    <p>
      - Estender e/ou secar imediatamente ap&oacute;s finalizado o processo de
      lavagem;
    </p>
    <p>- A secagem deve ser feita &agrave; sombra;</p>
    <p>
      - Para artigos de poliamida, principalmente de cores fluorescentes,
      n&atilde;o expor demasiadamente &agrave; luz solar ou artificial.
    </p>
  </div>
  <script>
    (function () {
      function safeJsonParse(text) {
        try {
          return JSON.parse(text);
        } catch (e) {
          return null;
        }
      }

      function getFromJsonLd() {
        const scripts = Array.from(
          document.querySelectorAll('script[type="application/ld+json"]')
        );
        for (const s of scripts) {
          const data = safeJsonParse(s.textContent || "");
          if (!data) continue;
          const nodes = Array.isArray(data) ? data : [data];
          for (const node of nodes) {
            if (!node) continue;

            if (
              (node["@type"] === "Product" || node["@type"] === "product") &&
              node.image
            ) {
              if (typeof node.image === "string") return node.image;
              if (Array.isArray(node.image) && node.image.length)
                return node.image[0];
            }

            if (Array.isArray(node["@graph"])) {
              for (const g of node["@graph"]) {
                if (
                  (g["@type"] === "Product" || g["@type"] === "product") &&
                  g.image
                ) {
                  if (typeof g.image === "string") return g.image;
                  if (Array.isArray(g.image) && g.image.length)
                    return g.image[0];
                }
              }
            }
          }
        }
        return null;
      }

      function getFromMeta() {
        const og = document
          .querySelector('meta[property="og:image"]')
          ?.getAttribute("content");
        if (og) return og;
        const tw = document
          .querySelector(
            'meta[name="twitter:image"], meta[name="twitter:image:src"]'
          )
          ?.getAttribute("content");
        return tw || null;
      }

      function getFromGallery() {
        const selectors = [
          ".gallery-main img",

          ".product-gallery img",
          ".product__gallery img",
          ".gallery img",
          "#galeria-product img",
          ".thumbs img",
          ".produto-imagens img",
          ".product-images img",
          ".product-main-image img",
        ];
        for (const sel of selectors) {
          const img = document.querySelector(sel);
          const src =
            img?.getAttribute("data-src") ||
            img?.getAttribute("data-large") ||
            img?.src;
          if (src) return src;
        }
        return null;
      }

      function normalizeUrl(url) {
        if (!url) return null;

        try {
          const u = new URL(url, location.origin);
          return u.href;
        } catch (_) {
          return url;
        }
      }

      function pickFirstProductImage() {
        const sources = [getFromJsonLd, getFromMeta, getFromGallery];
        for (const fn of sources) {
          const src = normalizeUrl(fn());
          if (src) return src;
        }
        return null;
      }

      function setDescriptionImage(src) {
        const target = document.querySelector(
          ".content-description-product .row .imagem-description figure img"
        );
        if (!target || !src) return false;
        if (!target.dataset.original) {
          target.dataset.original = target.getAttribute("src") || "";
        }
        if (target.getAttribute("src") === src) return true;
        target.setAttribute("src", src);

        if (target.hasAttribute("srcset")) target.removeAttribute("srcset");

        target.style.width = "400px";
        target.style.height = "400px";
        target.style.objectFit = "cover";
        target.style.objectPosition = "center";
        target.style.maxWidth = "400px";
        target.style.maxHeight = "400px";
        console.log("[Imagem Desc]", {
          original: target.dataset.original,
          novo: src,
        });
        return true;
      }

      function replaceDescriptionImage() {
        const newSrc = pickFirstProductImage();
        if (!newSrc) return false;
        return setDescriptionImage(newSrc);
      }

      function kickoff() {
        let applied = replaceDescriptionImage();
        let tries = 0;
        const maxTries = 40; // ~20s em 500ms
        const iv = setInterval(() => {
          if (applied) {
            clearInterval(iv);
            return;
          }
          applied = replaceDescriptionImage();
          tries += 1;
          if (tries >= maxTries) clearInterval(iv);
        }, 500);

        const gallery =
          document.querySelector(".gallery-main") || document.body;
        const mo = new MutationObserver(() => {
          const src = pickFirstProductImage();
          if (src) setDescriptionImage(src);
        });
        mo.observe(gallery, {
          subtree: true,
          childList: true,
          attributes: true,
          attributeFilter: ["src", "data-src"],
        });
      }

      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", kickoff);
      } else {
        kickoff();
      }
    })();
  </script>
</div>
