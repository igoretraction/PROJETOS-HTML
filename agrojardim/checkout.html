<p>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
</p>
<style>
  <!--
    .texto-banner .swiper-slide{
      width: 190.333px !important;
    }
    .texto-banner .swiper-wrapper{
      justify-content: center !important;
    }
    .pagina-conteudo-adicional.conteudo-adicional-51.cb-div.cb-div-18{
      margin: auto !important;
    }
    .swiper-button-prev.swiper-button-disabled,
    .swiper-button-next.swiper-button-disabled{ opacity:1 !important; }

    .swiper-button-prev:after,
    .swiper-button-next:after{
      border-right:1.6px solid #fff;
      border-bottom:1.6px solid #fff;
    }

    .titulo-prod{
      max-width:800px;margin:0 auto 12px;font-size:20px;text-align:center;
    }
  .texto-banner .swiper-slide{
    width: 200.333px;
  }

    .texto-banner-wrap{ position:relative;margin:0 auto;width:100%;max-width:980px;overflow:visible; }
    .texto-banner.swiper{ width:100%;overflow:hidden;padding:0 10px; }
    .texto-banner .swiper-wrapper{ align-items:stretch; }

    .texto-banner .swiper-slide{
      display:flex;align-items:stretch;justify-content:center;height:auto;
    }

    .item-slide{
      display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:8px;
      width:100%; /* deixa o Swiper controlar a largura do slide */
      text-align:center;border:1px solid var(--cor-bordas);background:#fff;border-radius:8px;
    }

    .container-prod{
      display:flex;flex-direction:column;justify-content:flex-start;align-items:center;
      width:100%;min-height:260px;border-radius:8px;padding:10px;box-shadow:0 0 5px #cecece;background:#fff;
    }

    .img-prod{ max-width:150px !important;max-height:95px !important;object-fit:contain; }

    .text-prod{ flex:1;display:flex;flex-direction:column;align-items:center;gap:6px;width:100%; }
    .text-prod>p{
      margin:0;line-height:1.25;max-width:180px;display:-webkit-box;-webkit-line-clamp:3;
      -webkit-box-orient:vertical;overflow:hidden;
    }

    .price-product{ font-size:13px; }
    .primary-price{ font-size:1em;color:var(--color-dark-700);line-height:20px; }
    .price-boleto{ font-weight:bold;color:#19c035; }

    .botao-prod{
      width:158px !important;height:34px;text-align:center;color:#fff;background:#1D4928;border:0;
      border-radius:10px;text-transform:uppercase;margin-top:auto;
    }
    .botao-prod:hover{ cursor:pointer;background:#13311C; }

    .texto-banner-wrap .swiper-button-prev,
    .texto-banner-wrap .swiper-button-next{
      position:absolute;top:50%;transform:translateY(-50%);width:36px;height:36px;border-radius:50%;
      background:#1D4928;color:#fff;display:flex;align-items:center;justify-content:center;
      box-shadow:0 2px 6px rgba(0,0,0,.2);z-index:10;
    }
    .texto-banner-wrap .swiper-button-prev{ left:135px; }
    .texto-banner-wrap .swiper-button-next{ right:145px; }

    /* MOBILE: 3 cards visíveis e sem setas */
    @media (max-width:800px){
      .texto-banner-wrap{ max-width:100%;padding:0 8px; }
      .texto-banner .swiper-slide {
      width: 119.333px !important;
  }
  .botao-prod {
      width: 101px !important;
  }
      .texto-banner-wrap .swiper-button-prev,
      .texto-banner-wrap .swiper-button-next{ display:none !important; } /* só desktop tem setas */

      .container-prod{ min-height:230px;padding:8px; }
      .text-prod>p{ font-size:13px;max-width:140px; }
      .botao-prod{ width:95px !important;height:30px;font-size:10px; }
      .img-prod{ max-width:120px !important;max-height:80px !important; }
    }

    /* Paginação (apenas útil no mobile) */
    .swiper-pagination{ position:static !important;margin-top:12px; }
    .swiper-pagination-bullet{ background:#1D4928;opacity:.3; }
    .swiper-pagination-bullet-active{ opacity:1; }

    .newBanner{ margin:auto; }
</style>
<div class="titulo-prod">
  <p>Quem comprou, tamb&eacute;m levou!</p>
</div>
<div class="texto-banner-wrap newBanner">
  <div class="swiper-button-prev"></div>
  <div class="texto-banner swiper">
    <div class="swiper-wrapper">
      <!-- SLIDE 1 -->
      <div class="swiper-slide">
        <div class="item-slide">
          <div class="container-prod">
            <img
              class="img-prod"
              src="https://agrojardim.cdn.magazord.com.br/img/2025/02/produto/2396/fertilizante-mineral-forth-frutas-crescimento-floracao-frutificacao-400g-agrojardim.png?ims=fit-in%2F98x98%2Ffilters%3Afill(white)"
              alt="Forth Frutas 400g"
            />
            <div class="text-prod">
              <p>Adubo Forth Frutas 400g &ndash; NPK + 9 nutrientes</p>
              <div class="price-product">
                <span class="primary-price"
                  ><span class="price-boleto">R$ 17,01</span> no PIX</span
                >
              </div>
            </div>
            <button class="botao-prod" data-sku="11783">Adicionar</button>
          </div>
        </div>
      </div>
      <!-- SLIDE 2 -->
      <div class="swiper-slide">
        <div class="item-slide">
          <div class="container-prod">
            <img
              class="img-prod"
              src="https://agrojardim.cdn.magazord.com.br/img/2024/08/produto/1776/fertilizante-humus-de-minhoca-vitaplan-2kg-agrojardim.png?ims=fit-in%2F98x98%2Ffilters%3Afill(white)"
              alt="H&uacute;mus de Minhoca Vitaplan 2kg"
            />
            <div class="text-prod">
              <p>H&uacute;mus de Minhoca Vitaplan 2kg</p>
              <div class="price-product">
                <span class="primary-price"
                  ><span class="price-boleto">R$ 14,16</span> no PIX</span
                >
              </div>
            </div>
            <button class="botao-prod" data-sku="11504">Adicionar</button>
          </div>
        </div>
      </div>
      <!-- SLIDE 3 -->
      <div class="swiper-slide">
        <div class="item-slide">
          <div class="container-prod">
            <img
              class="img-prod"
              src="https://agrojardim.cdn.magazord.com.br/img/2024/08/produto/1766/fertilizante-organico-esterco-de-aves-vitaplan-2kg-agrojardim.png?ims=fit-in%2F98x98%2Ffilters%3Afill(white)"
              alt="Esterco de Aves Vitaplan 2kg"
            />
            <div class="text-prod">
              <p>Esterco de Aves Vitaplan 2kg</p>
              <div class="price-product">
                <span class="primary-price"
                  ><span class="price-boleto">R$ 14,16</span> no PIX</span
                >
              </div>
            </div>
            <button class="botao-prod" data-sku="11505">Adicionar</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Paginação (mostra no mobile) -->
    <div class="swiper-pagination"></div>
  </div>
  <div class="swiper-button-next"></div>
</div>
<p>
 <script>
  (function initCarrossel() {
    var swiperInstance = new Swiper(".texto-banner.swiper", {
      slidesPerView: 3,
      spaceBetween: 16,
      loop: false,
      centeredSlides: false,
      watchOverflow: true,
      resistanceRatio: 0,
      observer: true,
      observeParents: true,
      grabCursor: true,
      navigation: {
        nextEl: ".texto-banner-wrap .swiper-button-next",
        prevEl: ".texto-banner-wrap .swiper-button-prev",
      },
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
        dynamicBullets: true,
      },
      breakpoints: {
        0:   { slidesPerView: 3, spaceBetween: 8  },
        640: { slidesPerView: 3, spaceBetween: 12 },
        992: { slidesPerView: 3, spaceBetween: 16 },
      },
    });

    // ----- ADICIONAR AO CARRINHO -----
    document.querySelectorAll(".botao-prod").forEach(function (btn) {
      btn.addEventListener("click", function (e) {
        e.preventDefault();

        var sku = (btn.dataset.sku || btn.getAttribute("rel") || "").toString().trim();
        var qty = parseInt(btn.dataset.qty || "1", 10);

        if (!sku) {
          console.warn("SKU ausente no botão:", btn);
          return;
        }

        // loading state
        var oldText = btn.textContent;
        btn.disabled = true;
        btn.textContent = "Adicionando...";

        // Função auxiliar para restaurar botão
        function restore() {
          btn.disabled = false;
          btn.textContent = oldText;
        }

        if (!(window.Zord && Zord.checkout && typeof Zord.checkout.addCart === "function")) {
          console.warn("Zord indisponível: verifique se o script da Magazord foi carregado.");
          restore();
          return;
        }

        // Alguns ambientes expõem um "onError" como 6º argumento.
        try {
          Zord.checkout.addCart(
            sku,          // SKU (obrigatório e válido)
            qty,          // quantidade
            1,            // vendedor (geralmente 1)
            0,            // gift/wishlist/etc.
            function onSuccess(resp) {
              // Atualiza mini-carrinho
              if (typeof Zord.checkout.atualizaQuantidadeEspecificaCarrinho === "function") {
                Zord.checkout.atualizaQuantidadeEspecificaCarrinho();
              }
              // Tenta abrir popup nativo (se existir)
              if (Zord.checkout.openPopupCarrinho && typeof Zord.checkout.openPopupCarrinho === "function") {
                Zord.checkout.openPopupCarrinho();
              }
              restore();
            },
            function onError(err) {
              // Tratativa de erro (ex.: 400 por SKU inválido / inativo)
              console.error("Falha ao adicionar ao carrinho (SKU:", sku, "QTY:", qty, "):", err);
              restore();
            }
          );
        } catch (ex) {
          console.error("Exceção no addCart (SKU:", sku, "):", ex);
          restore();
        }
      });
    });

    // Reinstancia se o carrinho mudar (delete/add/remove)
    if (window.jQuery) {
      jQuery(document).ajaxComplete(function (_e, _xhr, settings) {
        if (settings && settings.url &&
            /checkout\/cart\?operation=(deleteItem|adicionaItem|removeItem|add)/.test(settings.url)) {
          swiperInstance.update();
        }
      });
    }
  })();
</script>

</p>


